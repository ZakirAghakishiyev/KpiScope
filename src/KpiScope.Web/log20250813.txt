2025-08-13 09:35:11.081 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-08-13 09:35:11.141 +04:00 [INF] Registered 27 endpoints in 7,704 milliseconds.
2025-08-13 09:35:14.484 +04:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 09:35:14.857 +04:00 [INF] Executed DbCommand (327ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 09:35:14.894 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 09:35:14.902 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 09:35:15.069 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-13 09:35:15.116 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 09:35:15.833 +04:00 [INF] Now listening on: https://localhost:57679
2025-08-13 09:35:15.837 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 09:35:15.839 +04:00 [INF] Hosting environment: Development
2025-08-13 09:35:15.840 +04:00 [INF] Content root path: E:\Work\KPI\KpiScope\src\KpiScope.Web
2025-08-13 09:35:19.558 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/ - null null
2025-08-13 09:35:23.699 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/   Responded with [404] in 134ms
2025-08-13 09:35:23.709 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/ - 404 157 application/json 4153.9322ms
2025-08-13 09:35:23.728 +04:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:57679/, Response status code: 404
2025-08-13 09:35:24.700 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/favicon.ico - null null
2025-08-13 09:35:24.719 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/favicon.ico   Responded with [404] in 2ms
2025-08-13 09:35:24.725 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/favicon.ico - 404 157 application/json 24.971ms
2025-08-13 09:35:24.746 +04:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:57679/favicon.ico, Response status code: 404
2025-08-13 09:35:30.622 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2025-08-13 09:35:30.757 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html; charset=utf-8 134.8659ms
2025-08-13 09:35:32.529 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2025-08-13 09:35:34.071 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json; charset=utf-8 1542.3147ms
2025-08-13 09:35:55.549 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi - application/json 77
2025-08-13 09:35:55.635 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi'
2025-08-13 09:35:57.494 +04:00 [INF] Executed DbCommand (391ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Kpis] ([CompanyId], [GriIndex], [KpiGroupId], [Name], [TimePeriod])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-08-13 09:35:57.785 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi'
2025-08-13 09:35:57.911 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi  {
  "name": "Kpiing",
  "griIndex": 2,
  "timePeriod": 2,
  "kpiGroupId": 4
} Responded with [200] in 2327ms
2025-08-13 09:35:57.942 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi - 200 188 application/json 2392.9774ms
2025-08-13 09:36:07.449 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi - application/json 77
2025-08-13 09:36:07.457 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi'
2025-08-13 09:36:07.472 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Kpis] ([CompanyId], [GriIndex], [KpiGroupId], [Name], [TimePeriod])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-08-13 09:36:07.482 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi'
2025-08-13 09:36:07.487 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi  {
  "name": "Colors",
  "griIndex": 2,
  "timePeriod": 2,
  "kpiGroupId": 4
} Responded with [200] in 30ms
2025-08-13 09:36:07.492 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi - 200 188 application/json 42.6946ms
2025-08-13 09:36:12.910 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Kpi - null null
2025-08-13 09:36:12.917 +04:00 [INF] Executing endpoint 'HTTP: GET /Kpi'
2025-08-13 09:36:13.979 +04:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod], [k0].[Id], [k0].[Name], [s].[Id], [s].[Comment], [s].[CreatedAt], [s].[KpiConfirmationId], [s].[KpiId], [s].[Status], [s].[ValueId], [s].[Id0], [s].[JsonValue], [s].[Name], [s].[Type]
FROM [Kpis] AS [k]
INNER JOIN [KpiGroups] AS [k0] ON [k].[KpiGroupId] = [k0].[Id]
LEFT JOIN (
    SELECT [k1].[Id], [k1].[Comment], [k1].[CreatedAt], [k1].[KpiConfirmationId], [k1].[KpiId], [k1].[Status], [k1].[ValueId], [d].[Id] AS [Id0], [d].[JsonValue], [d].[Name], [d].[Type]
    FROM [KpiValues] AS [k1]
    INNER JOIN [DynamicValues] AS [d] ON [k1].[ValueId] = [d].[Id]
) AS [s] ON [k].[Id] = [s].[KpiId]
ORDER BY [k].[Id], [k0].[Id], [s].[Id]
2025-08-13 09:36:14.115 +04:00 [INF] Executed endpoint 'HTTP: GET /Kpi'
2025-08-13 09:36:14.136 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/Kpi   Responded with [200] in 1218ms
2025-08-13 09:36:14.140 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Kpi - 200 917 application/json 1229.4275ms
2025-08-13 09:36:34.725 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Kpi/4 - null null
2025-08-13 09:36:34.731 +04:00 [INF] Executing endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 09:36:34.858 +04:00 [INF] Executed DbCommand (23ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CompanyId], [s].[GriIndex], [s].[KpiGroupId], [s].[Name], [s].[TimePeriod], [s].[Id0], [s].[Name0], [s0].[Id], [s0].[Comment], [s0].[CreatedAt], [s0].[KpiConfirmationId], [s0].[KpiId], [s0].[Status], [s0].[ValueId], [s0].[Id0], [s0].[JsonValue], [s0].[Name], [s0].[Type]
FROM (
    SELECT TOP(1) [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod], [k0].[Id] AS [Id0], [k0].[Name] AS [Name0]
    FROM [Kpis] AS [k]
    INNER JOIN [KpiGroups] AS [k0] ON [k].[KpiGroupId] = [k0].[Id]
    WHERE [k].[Id] = @__id_0
) AS [s]
LEFT JOIN (
    SELECT [k1].[Id], [k1].[Comment], [k1].[CreatedAt], [k1].[KpiConfirmationId], [k1].[KpiId], [k1].[Status], [k1].[ValueId], [d].[Id] AS [Id0], [d].[JsonValue], [d].[Name], [d].[Type]
    FROM [KpiValues] AS [k1]
    INNER JOIN [DynamicValues] AS [d] ON [k1].[ValueId] = [d].[Id]
) AS [s0] ON [s].[Id] = [s0].[KpiId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id]
2025-08-13 09:36:34.884 +04:00 [INF] Executed endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 09:36:34.888 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/Kpi/4   Responded with [200] in 157ms
2025-08-13 09:36:34.891 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Kpi/4 - 200 264 application/json 165.5807ms
2025-08-13 09:36:53.724 +04:00 [INF] Request starting HTTP/2 DELETE https://localhost:57679/Kpi/2 - null null
2025-08-13 09:36:53.731 +04:00 [INF] Executing endpoint 'HTTP: DELETE /Kpi/{Id}'
2025-08-13 09:36:53.785 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod]
FROM [Kpis] AS [k]
WHERE [k].[Id] = @__p_0
2025-08-13 09:36:53.837 +04:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Kpis]
OUTPUT 1
WHERE [Id] = @p0;
2025-08-13 09:36:53.855 +04:00 [INF] Executed endpoint 'HTTP: DELETE /Kpi/{Id}'
2025-08-13 09:36:53.859 +04:00 [INF] Source:[::1] Request: DELETE https localhost:57679/Kpi/2   Responded with [200] in 128ms
2025-08-13 09:36:53.862 +04:00 [INF] Request finished HTTP/2 DELETE https://localhost:57679/Kpi/2 - 200 103 application/json 137.6853ms
2025-08-13 09:37:00.455 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Kpi/2 - null null
2025-08-13 09:37:00.460 +04:00 [INF] Executing endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 09:37:00.486 +04:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CompanyId], [s].[GriIndex], [s].[KpiGroupId], [s].[Name], [s].[TimePeriod], [s].[Id0], [s].[Name0], [s0].[Id], [s0].[Comment], [s0].[CreatedAt], [s0].[KpiConfirmationId], [s0].[KpiId], [s0].[Status], [s0].[ValueId], [s0].[Id0], [s0].[JsonValue], [s0].[Name], [s0].[Type]
FROM (
    SELECT TOP(1) [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod], [k0].[Id] AS [Id0], [k0].[Name] AS [Name0]
    FROM [Kpis] AS [k]
    INNER JOIN [KpiGroups] AS [k0] ON [k].[KpiGroupId] = [k0].[Id]
    WHERE [k].[Id] = @__id_0
) AS [s]
LEFT JOIN (
    SELECT [k1].[Id], [k1].[Comment], [k1].[CreatedAt], [k1].[KpiConfirmationId], [k1].[KpiId], [k1].[Status], [k1].[ValueId], [d].[Id] AS [Id0], [d].[JsonValue], [d].[Name], [d].[Type]
    FROM [KpiValues] AS [k1]
    INNER JOIN [DynamicValues] AS [d] ON [k1].[ValueId] = [d].[Id]
) AS [s0] ON [s].[Id] = [s0].[KpiId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id]
2025-08-13 09:37:00.496 +04:00 [INF] Executed endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 09:37:00.504 +04:00 [ERR] [500]: Unhandled Exception occurred. Unable to process the request.
System.Collections.Generic.KeyNotFoundException: KPI with ID 2 not found.
   at KpiScope.Web.KPI.KpiEndpointService.GetKpiByIdAsync(GetKpiByIdRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\KpiEndpointService.cs:line 70
   at KpiScope.Web.KPI.GetById.GetbyId.HandleAsync(GetKpiByIdRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\GetById\GetbyId.cs:line 13
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at AutoWrapper.Base.WrapperBase.InvokeAsyncBase(HttpContext context, AutoWrapperMembers awm)
2025-08-13 09:37:00.553 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/Kpi/2   Responded with [500] in 93ms
2025-08-13 09:37:00.556 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Kpi/2 - 500 165 application/json 101.242ms
2025-08-13 09:37:05.462 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Kpi/4 - null null
2025-08-13 09:37:05.477 +04:00 [INF] Executing endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 09:37:05.530 +04:00 [INF] Executed DbCommand (43ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CompanyId], [s].[GriIndex], [s].[KpiGroupId], [s].[Name], [s].[TimePeriod], [s].[Id0], [s].[Name0], [s0].[Id], [s0].[Comment], [s0].[CreatedAt], [s0].[KpiConfirmationId], [s0].[KpiId], [s0].[Status], [s0].[ValueId], [s0].[Id0], [s0].[JsonValue], [s0].[Name], [s0].[Type]
FROM (
    SELECT TOP(1) [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod], [k0].[Id] AS [Id0], [k0].[Name] AS [Name0]
    FROM [Kpis] AS [k]
    INNER JOIN [KpiGroups] AS [k0] ON [k].[KpiGroupId] = [k0].[Id]
    WHERE [k].[Id] = @__id_0
) AS [s]
LEFT JOIN (
    SELECT [k1].[Id], [k1].[Comment], [k1].[CreatedAt], [k1].[KpiConfirmationId], [k1].[KpiId], [k1].[Status], [k1].[ValueId], [d].[Id] AS [Id0], [d].[JsonValue], [d].[Name], [d].[Type]
    FROM [KpiValues] AS [k1]
    INNER JOIN [DynamicValues] AS [d] ON [k1].[ValueId] = [d].[Id]
) AS [s0] ON [s].[Id] = [s0].[KpiId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id]
2025-08-13 09:37:05.546 +04:00 [INF] Executed endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 09:37:05.554 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/Kpi/4   Responded with [200] in 76ms
2025-08-13 09:37:05.559 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Kpi/4 - 200 264 application/json 96.3718ms
2025-08-13 09:40:00.654 +04:00 [INF] Application is shutting down...
2025-08-13 09:40:21.691 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-08-13 09:40:21.754 +04:00 [INF] Registered 27 endpoints in 1,626 milliseconds.
2025-08-13 09:40:24.131 +04:00 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 09:40:24.333 +04:00 [INF] Executed DbCommand (122ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 09:40:24.440 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 09:40:24.464 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 09:40:24.606 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-13 09:40:24.675 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 09:40:25.421 +04:00 [INF] Now listening on: https://localhost:57679
2025-08-13 09:40:25.430 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 09:40:25.437 +04:00 [INF] Hosting environment: Development
2025-08-13 09:40:25.444 +04:00 [INF] Content root path: E:\Work\KPI\KpiScope\src\KpiScope.Web
2025-08-13 09:40:32.040 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2025-08-13 09:40:32.818 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html; charset=utf-8 782.5867ms
2025-08-13 09:40:33.918 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2025-08-13 09:40:35.523 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json; charset=utf-8 1605.1019ms
2025-08-13 09:43:43.179 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi/AddValue - application/json 277
2025-08-13 09:43:43.276 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 09:43:44.661 +04:00 [INF] Executed DbCommand (63ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DynamicValues] ([JsonValue], [Name], [Type])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-08-13 09:43:44.828 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 09:43:44.842 +04:00 [ERR] [500]: Unhandled Exception occurred. Unable to process the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
DynamicValue -> CreateDynamicValueResponse
KpiScope.Core.KpiAggregate.DynamicValue -> KpiScope.Web.Value.DynamicValue.Create.CreateDynamicValueResponse
   at lambda_method1055(Closure, Object, CreateDynamicValueResponse, ResolutionContext)
   at KpiScope.Web.Value.DynamicValue.DynamicValueService.CreateDynamicValueAsync(CreateDynamicValueRequest dynamicValue) in E:\Work\KPI\KpiScope\src\KpiScope.Web\Value\DynamicValue\DynamicValueService.cs:line 42
   at KpiScope.Web.Value.KpiValue.KpiValueService.CreateKpiValueAsync(CreateKpiValueRequest kpiValue) in E:\Work\KPI\KpiScope\src\KpiScope.Web\Value\KpiValue\KpiValueService.cs:line 19
   at KpiScope.Web.KPI.KpiEndpointService.AddValueAsync(AddValueRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\KpiEndpointService.cs:line 22
   at KpiScope.Web.KPI.AddValue.AddValue.HandleAsync(AddValueRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\AddValue\AddValue.cs:line 13
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at AutoWrapper.Base.WrapperBase.InvokeAsyncBase(HttpContext context, AutoWrapperMembers awm)
2025-08-13 09:43:45.052 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi/AddValue  {
  "kpiValue": {
    "kpiId": 3,
    "dynamicValue": {
      "layers": [
        {
          "type": 1,
          "value": "blue"
        }
      ],
      "name": "blue"
    },
    "statusEnum": 1,
    "createdAt": "2025-08-13T05:40:35.734Z",
    "comment": "blue colow"
  }
} Responded with [500] in 1791ms
2025-08-13 09:43:45.080 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi/AddValue - 500 165 application/json 1900.8852ms
2025-08-13 09:44:26.514 +04:00 [INF] Application is shutting down...
2025-08-13 09:44:53.973 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-08-13 09:44:54.038 +04:00 [INF] Registered 27 endpoints in 2,067 milliseconds.
2025-08-13 09:44:56.059 +04:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 09:44:56.150 +04:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 09:44:56.320 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 09:44:56.322 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 09:44:56.474 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-13 09:44:56.557 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 09:44:56.971 +04:00 [INF] Now listening on: https://localhost:57679
2025-08-13 09:44:56.972 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 09:44:56.972 +04:00 [INF] Hosting environment: Development
2025-08-13 09:44:56.972 +04:00 [INF] Content root path: E:\Work\KPI\KpiScope\src\KpiScope.Web
2025-08-13 09:45:03.368 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2025-08-13 09:45:04.374 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html; charset=utf-8 1005.2796ms
2025-08-13 09:45:05.487 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2025-08-13 09:45:07.450 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json; charset=utf-8 1962.8848ms
2025-08-13 09:45:31.844 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi/AddValue - application/json 277
2025-08-13 09:45:31.884 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 09:45:52.608 +04:00 [INF] Executed DbCommand (93ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DynamicValues] ([JsonValue], [Name], [Type])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-08-13 09:46:19.733 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 09:46:19.737 +04:00 [ERR] [500]: Unhandled Exception occurred. Unable to process the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
DynamicValue -> CreateDynamicValueResponse
KpiScope.Core.KpiAggregate.DynamicValue -> KpiScope.Web.Value.DynamicValue.Create.CreateDynamicValueResponse
   at lambda_method1057(Closure, Object, CreateDynamicValueResponse, ResolutionContext)
   at KpiScope.Web.Value.DynamicValue.DynamicValueService.CreateDynamicValueAsync(CreateDynamicValueRequest dynamicValue) in E:\Work\KPI\KpiScope\src\KpiScope.Web\Value\DynamicValue\DynamicValueService.cs:line 42
   at KpiScope.Web.Value.KpiValue.KpiValueService.CreateKpiValueAsync(CreateKpiValueRequest kpiValue) in E:\Work\KPI\KpiScope\src\KpiScope.Web\Value\KpiValue\KpiValueService.cs:line 19
   at KpiScope.Web.KPI.KpiEndpointService.AddValueAsync(AddValueRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\KpiEndpointService.cs:line 22
   at KpiScope.Web.KPI.AddValue.AddValue.HandleAsync(AddValueRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\AddValue\AddValue.cs:line 13
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at AutoWrapper.Base.WrapperBase.InvokeAsyncBase(HttpContext context, AutoWrapperMembers awm)
2025-08-13 09:46:19.864 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi/AddValue  {
  "kpiValue": {
    "kpiId": 4,
    "dynamicValue": {
      "layers": [
        {
          "type": 1,
          "value": "blue"
        }
      ],
      "name": "blue"
    },
    "statusEnum": 1,
    "createdAt": "2025-08-13T05:45:07.688Z",
    "comment": "blue color"
  }
} Responded with [500] in 47953ms
2025-08-13 09:46:19.895 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi/AddValue - 500 165 application/json 48050.9204ms
2025-08-13 09:48:19.026 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-08-13 09:48:19.090 +04:00 [INF] Registered 27 endpoints in 1,595 milliseconds.
2025-08-13 09:48:20.976 +04:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 09:48:21.097 +04:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 09:48:21.318 +04:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 09:48:21.322 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 09:48:21.466 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-13 09:48:21.716 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 09:48:22.330 +04:00 [INF] Now listening on: https://localhost:57679
2025-08-13 09:48:22.331 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 09:48:22.331 +04:00 [INF] Hosting environment: Development
2025-08-13 09:48:22.331 +04:00 [INF] Content root path: E:\Work\KPI\KpiScope\src\KpiScope.Web
2025-08-13 09:48:30.061 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi/AddValue - application/json 277
2025-08-13 09:48:30.375 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 09:48:39.926 +04:00 [INF] Executed DbCommand (32ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DynamicValues] ([JsonValue], [Name], [Type])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-08-13 09:48:40.099 +04:00 [INF] Executed DbCommand (27ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [KpiValues] ([Comment], [CreatedAt], [KpiConfirmationId], [KpiId], [Status], [ValueId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-13 09:48:40.676 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 09:48:40.682 +04:00 [ERR] [500]: Unhandled Exception occurred. Unable to process the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
CreateKpiValueResponse -> ListKpiResponse
KpiScope.Web.Value.KpiValue.Create.CreateKpiValueResponse -> KpiScope.Web.KPI.List.ListKpiResponse
   at lambda_method772(Closure, Object, ListKpiResponse, ResolutionContext)
   at KpiScope.Web.KPI.KpiEndpointService.AddValueAsync(AddValueRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\KpiEndpointService.cs:line 26
   at KpiScope.Web.KPI.AddValue.AddValue.HandleAsync(AddValueRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\AddValue\AddValue.cs:line 13
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at AutoWrapper.Base.WrapperBase.InvokeAsyncBase(HttpContext context, AutoWrapperMembers awm)
2025-08-13 09:48:40.933 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi/AddValue  {
  "kpiValue": {
    "kpiId": 4,
    "dynamicValue": {
      "layers": [
        {
          "type": 1,
          "value": "blue"
        }
      ],
      "name": "blue"
    },
    "statusEnum": 1,
    "createdAt": "2025-08-13T05:45:07.688Z",
    "comment": "blue color"
  }
} Responded with [500] in 10560ms
2025-08-13 09:48:40.954 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi/AddValue - 500 165 application/json 10895.2458ms
2025-08-13 09:49:35.590 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-08-13 09:49:35.639 +04:00 [INF] Registered 27 endpoints in 2,245 milliseconds.
2025-08-13 09:49:37.699 +04:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 09:49:37.826 +04:00 [INF] Executed DbCommand (100ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 09:49:38.043 +04:00 [INF] Executed DbCommand (93ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 09:49:38.048 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 09:49:38.259 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-13 09:49:38.301 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 09:49:38.721 +04:00 [INF] Now listening on: https://localhost:57679
2025-08-13 09:49:38.722 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 09:49:38.722 +04:00 [INF] Hosting environment: Development
2025-08-13 09:49:38.722 +04:00 [INF] Content root path: E:\Work\KPI\KpiScope\src\KpiScope.Web
2025-08-13 09:49:42.287 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi/AddValue - application/json 277
2025-08-13 09:49:42.796 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 09:49:50.228 +04:00 [INF] Executed DbCommand (36ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DynamicValues] ([JsonValue], [Name], [Type])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-08-13 09:49:50.488 +04:00 [INF] Executed DbCommand (38ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [KpiValues] ([Comment], [CreatedAt], [KpiConfirmationId], [KpiId], [Status], [ValueId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-13 09:49:51.099 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 09:49:51.109 +04:00 [ERR] [500]: Unhandled Exception occurred. Unable to process the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
CreateKpiValueResponse -> ListKpiResponse
KpiScope.Web.Value.KpiValue.Create.CreateKpiValueResponse -> KpiScope.Web.KPI.List.ListKpiResponse
   at lambda_method772(Closure, Object, ListKpiResponse, ResolutionContext)
   at KpiScope.Web.KPI.KpiEndpointService.AddValueAsync(AddValueRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\KpiEndpointService.cs:line 26
   at KpiScope.Web.KPI.AddValue.AddValue.HandleAsync(AddValueRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\AddValue\AddValue.cs:line 13
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at AutoWrapper.Base.WrapperBase.InvokeAsyncBase(HttpContext context, AutoWrapperMembers awm)
2025-08-13 09:49:51.419 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi/AddValue  {
  "kpiValue": {
    "kpiId": 4,
    "dynamicValue": {
      "layers": [
        {
          "type": 1,
          "value": "blue"
        }
      ],
      "name": "blue"
    },
    "statusEnum": 1,
    "createdAt": "2025-08-13T05:45:07.688Z",
    "comment": "blue color"
  }
} Responded with [500] in 8635ms
2025-08-13 09:49:51.447 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi/AddValue - 500 165 application/json 9165.9695ms
2025-08-13 09:51:28.624 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-08-13 09:51:28.716 +04:00 [INF] Registered 27 endpoints in 2,836 milliseconds.
2025-08-13 09:51:32.010 +04:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 09:51:32.165 +04:00 [INF] Executed DbCommand (117ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 09:51:32.510 +04:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 09:51:32.515 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 09:51:32.717 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-13 09:51:32.822 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 09:51:33.218 +04:00 [INF] Now listening on: https://localhost:57679
2025-08-13 09:51:33.219 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 09:51:33.219 +04:00 [INF] Hosting environment: Development
2025-08-13 09:51:33.220 +04:00 [INF] Content root path: E:\Work\KPI\KpiScope\src\KpiScope.Web
2025-08-13 09:51:35.371 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi/AddValue - application/json 277
2025-08-13 09:51:35.752 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 09:51:41.676 +04:00 [INF] Executed DbCommand (30ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DynamicValues] ([JsonValue], [Name], [Type])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-08-13 09:51:41.930 +04:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [KpiValues] ([Comment], [CreatedAt], [KpiConfirmationId], [KpiId], [Status], [ValueId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-13 09:51:42.044 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 09:51:42.661 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi/AddValue  {
  "kpiValue": {
    "kpiId": 4,
    "dynamicValue": {
      "layers": [
        {
          "type": 1,
          "value": "blue"
        }
      ],
      "name": "blue"
    },
    "statusEnum": 1,
    "createdAt": "2025-08-13T05:45:07.688Z",
    "comment": "blue color"
  }
} Responded with [200] in 6902ms
2025-08-13 09:51:42.692 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi/AddValue - 200 276 application/json 7326.932ms
2025-08-13 09:52:56.652 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi/AddValue - application/json 285
2025-08-13 09:52:56.660 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 09:53:02.537 +04:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DynamicValues] ([JsonValue], [Name], [Type])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-08-13 09:53:02.560 +04:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [KpiValues] ([Comment], [CreatedAt], [KpiConfirmationId], [KpiId], [Status], [ValueId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-13 09:53:02.564 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 09:53:02.570 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi/AddValue  {
  "kpiValue": {
    "kpiId": 4,
    "dynamicValue": {
      "layers": [
        {
          "type": 7,
          "value": "[green, red]"
        }
      ],
      "name": "list"
    },
    "statusEnum": 1,
    "createdAt": "2025-08-13T05:45:07.688Z",
    "comment": "list color"
  }
} Responded with [200] in 5909ms
2025-08-13 09:53:02.574 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi/AddValue - 200 276 application/json 5920.9434ms
2025-08-13 09:53:13.012 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Kpi/4 - null null
2025-08-13 09:53:13.015 +04:00 [INF] Executing endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 09:53:17.755 +04:00 [INF] Executed DbCommand (59ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CompanyId], [s].[GriIndex], [s].[KpiGroupId], [s].[Name], [s].[TimePeriod], [s].[Id0], [s].[Name0], [s0].[Id], [s0].[Comment], [s0].[CreatedAt], [s0].[KpiConfirmationId], [s0].[KpiId], [s0].[Status], [s0].[ValueId], [s0].[Id0], [s0].[JsonValue], [s0].[Name], [s0].[Type]
FROM (
    SELECT TOP(1) [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod], [k0].[Id] AS [Id0], [k0].[Name] AS [Name0]
    FROM [Kpis] AS [k]
    INNER JOIN [KpiGroups] AS [k0] ON [k].[KpiGroupId] = [k0].[Id]
    WHERE [k].[Id] = @__id_0
) AS [s]
LEFT JOIN (
    SELECT [k1].[Id], [k1].[Comment], [k1].[CreatedAt], [k1].[KpiConfirmationId], [k1].[KpiId], [k1].[Status], [k1].[ValueId], [d].[Id] AS [Id0], [d].[JsonValue], [d].[Name], [d].[Type]
    FROM [KpiValues] AS [k1]
    INNER JOIN [DynamicValues] AS [d] ON [k1].[ValueId] = [d].[Id]
) AS [s0] ON [s].[Id] = [s0].[KpiId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id]
2025-08-13 09:53:18.083 +04:00 [INF] Executed endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 09:53:18.120 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/Kpi/4   Responded with [200] in 5104ms
2025-08-13 09:53:18.121 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Kpi/4 - 200 1569 application/json 5108.6787ms
2025-08-13 09:54:57.683 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi/AddValue - application/json 306
2025-08-13 09:54:57.722 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 09:55:08.360 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DynamicValues] ([JsonValue], [Name], [Type])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-08-13 09:55:08.386 +04:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [KpiValues] ([Comment], [CreatedAt], [KpiConfirmationId], [KpiId], [Status], [ValueId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-13 09:55:08.388 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 09:55:08.391 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi/AddValue  {
  "kpiValue": {
    "kpiId": 4,
    "dynamicValue": {
      "layers": [
        {
          "type": 7,
          "value": "[color1, [orange, purple]]"
        }
      ],
      "name": "nested list"
    },
    "statusEnum": 1,
    "createdAt": "2025-08-13T05:45:07.688Z",
    "comment": "list color"
  }
} Responded with [200] in 10668ms
2025-08-13 09:55:08.392 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi/AddValue - 200 276 application/json 10709.0051ms
2025-08-13 09:55:18.141 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Kpi/4 - null null
2025-08-13 09:55:18.142 +04:00 [INF] Executing endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 09:55:21.281 +04:00 [INF] Executed DbCommand (32ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CompanyId], [s].[GriIndex], [s].[KpiGroupId], [s].[Name], [s].[TimePeriod], [s].[Id0], [s].[Name0], [s0].[Id], [s0].[Comment], [s0].[CreatedAt], [s0].[KpiConfirmationId], [s0].[KpiId], [s0].[Status], [s0].[ValueId], [s0].[Id0], [s0].[JsonValue], [s0].[Name], [s0].[Type]
FROM (
    SELECT TOP(1) [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod], [k0].[Id] AS [Id0], [k0].[Name] AS [Name0]
    FROM [Kpis] AS [k]
    INNER JOIN [KpiGroups] AS [k0] ON [k].[KpiGroupId] = [k0].[Id]
    WHERE [k].[Id] = @__id_0
) AS [s]
LEFT JOIN (
    SELECT [k1].[Id], [k1].[Comment], [k1].[CreatedAt], [k1].[KpiConfirmationId], [k1].[KpiId], [k1].[Status], [k1].[ValueId], [d].[Id] AS [Id0], [d].[JsonValue], [d].[Name], [d].[Type]
    FROM [KpiValues] AS [k1]
    INNER JOIN [DynamicValues] AS [d] ON [k1].[ValueId] = [d].[Id]
) AS [s0] ON [s].[Id] = [s0].[KpiId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id]
2025-08-13 09:55:21.289 +04:00 [INF] Executed endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 09:55:21.294 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/Kpi/4   Responded with [200] in 3151ms
2025-08-13 09:55:21.295 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Kpi/4 - 200 1921 application/json 3153.2003ms
2025-08-13 09:58:30.985 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-08-13 09:58:31.036 +04:00 [INF] Registered 27 endpoints in 1,735 milliseconds.
2025-08-13 09:58:33.192 +04:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 09:58:33.299 +04:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 09:58:33.417 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 09:58:33.420 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 09:58:33.541 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-13 09:58:33.606 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 09:58:34.068 +04:00 [INF] Now listening on: https://localhost:57679
2025-08-13 09:58:34.069 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 09:58:34.069 +04:00 [INF] Hosting environment: Development
2025-08-13 09:58:34.069 +04:00 [INF] Content root path: E:\Work\KPI\KpiScope\src\KpiScope.Web
2025-08-13 09:58:58.903 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Kpi/4 - null null
2025-08-13 09:58:59.150 +04:00 [INF] Executing endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 09:59:05.423 +04:00 [INF] Executed DbCommand (33ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CompanyId], [s].[GriIndex], [s].[KpiGroupId], [s].[Name], [s].[TimePeriod], [s].[Id0], [s].[Name0], [s0].[Id], [s0].[Comment], [s0].[CreatedAt], [s0].[KpiConfirmationId], [s0].[KpiId], [s0].[Status], [s0].[ValueId], [s0].[Id0], [s0].[JsonValue], [s0].[Name], [s0].[Type]
FROM (
    SELECT TOP(1) [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod], [k0].[Id] AS [Id0], [k0].[Name] AS [Name0]
    FROM [Kpis] AS [k]
    INNER JOIN [KpiGroups] AS [k0] ON [k].[KpiGroupId] = [k0].[Id]
    WHERE [k].[Id] = @__id_0
) AS [s]
LEFT JOIN (
    SELECT [k1].[Id], [k1].[Comment], [k1].[CreatedAt], [k1].[KpiConfirmationId], [k1].[KpiId], [k1].[Status], [k1].[ValueId], [d].[Id] AS [Id0], [d].[JsonValue], [d].[Name], [d].[Type]
    FROM [KpiValues] AS [k1]
    INNER JOIN [DynamicValues] AS [d] ON [k1].[ValueId] = [d].[Id]
) AS [s0] ON [s].[Id] = [s0].[KpiId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id]
2025-08-13 09:59:05.702 +04:00 [INF] Executed endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 09:59:05.934 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/Kpi/4   Responded with [200] in 6779ms
2025-08-13 09:59:05.949 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Kpi/4 - 200 1921 application/json 7046.7288ms
2025-08-13 10:02:58.359 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-08-13 10:02:58.416 +04:00 [INF] Registered 27 endpoints in 1,654 milliseconds.
2025-08-13 10:03:00.880 +04:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 10:03:00.974 +04:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 10:03:01.153 +04:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 10:03:01.195 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 10:03:01.264 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-13 10:03:01.297 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 10:03:01.575 +04:00 [INF] Now listening on: https://localhost:57679
2025-08-13 10:03:01.576 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 10:03:01.576 +04:00 [INF] Hosting environment: Development
2025-08-13 10:03:01.576 +04:00 [INF] Content root path: E:\Work\KPI\KpiScope\src\KpiScope.Web
2025-08-13 10:03:09.341 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi/AddValue - application/json 306
2025-08-13 10:03:09.510 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 10:03:15.835 +04:00 [INF] Executed DbCommand (29ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DynamicValues] ([JsonValue], [Name], [Type])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-08-13 10:03:16.047 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [KpiValues] ([Comment], [CreatedAt], [KpiConfirmationId], [KpiId], [Status], [ValueId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-13 10:03:16.094 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 10:03:16.297 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi/AddValue  {
  "kpiValue": {
    "kpiId": 4,
    "dynamicValue": {
      "layers": [
        {
          "type": 7,
          "value": "[color1, [orange, purple]]"
        }
      ],
      "name": "nested list"
    },
    "statusEnum": 1,
    "createdAt": "2025-08-13T05:45:07.688Z",
    "comment": "list color"
  }
} Responded with [200] in 6787ms
2025-08-13 10:03:16.311 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi/AddValue - 200 207 application/json 6971.1224ms
2025-08-13 10:03:56.743 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi/AddValue - application/json 306
2025-08-13 10:03:56.748 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 10:04:22.166 +04:00 [INF] Executed DbCommand (1,314ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DynamicValues] ([JsonValue], [Name], [Type])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-08-13 10:04:22.174 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [KpiValues] ([Comment], [CreatedAt], [KpiConfirmationId], [KpiId], [Status], [ValueId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-13 10:05:47.093 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 10:05:47.151 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi/AddValue  {
  "kpiValue": {
    "kpiId": 4,
    "dynamicValue": {
      "layers": [
        {
          "type": 7,
          "value": "[color1, [orange, purple]]"
        }
      ],
      "name": "nested list"
    },
    "statusEnum": 1,
    "createdAt": "2025-08-13T05:45:07.688Z",
    "comment": "list color"
  }
} Responded with [200] in 110403ms
2025-08-13 10:05:47.152 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi/AddValue - 200 207 application/json 110409.7416ms
2025-08-13 10:06:21.862 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi/AddValue - application/json 375
2025-08-13 10:06:21.863 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 10:06:23.796 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DynamicValues] ([JsonValue], [Name], [Type])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-08-13 10:06:23.800 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [KpiValues] ([Comment], [CreatedAt], [KpiConfirmationId], [KpiId], [Status], [ValueId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-13 10:06:23.801 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 10:06:23.802 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi/AddValue  {
  "kpiValue": {
    "kpiId": 4,
    "dynamicValue": {
      "layers": [
        {
          "type": 7,
          "value": "[color1, [orange, purple]]"
        },
        {
          "type": 1,
          "value":"color2"
        }
      ],
      "name": "nested list"
    },
    "statusEnum": 1,
    "createdAt": "2025-08-13T05:45:07.688Z",
    "comment": "list color"
  }
} Responded with [200] in 1938ms
2025-08-13 10:06:23.802 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi/AddValue - 200 207 application/json 1939.768ms
2025-08-13 10:07:13.296 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-08-13 10:07:13.365 +04:00 [INF] Registered 27 endpoints in 1,220 milliseconds.
2025-08-13 10:07:14.995 +04:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 10:07:15.072 +04:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 10:07:15.324 +04:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 10:07:15.326 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 10:07:15.415 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-13 10:07:15.452 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 10:07:15.867 +04:00 [INF] Now listening on: https://localhost:57679
2025-08-13 10:07:15.867 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 10:07:15.867 +04:00 [INF] Hosting environment: Development
2025-08-13 10:07:15.867 +04:00 [INF] Content root path: E:\Work\KPI\KpiScope\src\KpiScope.Web
2025-08-13 10:07:20.174 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Kpi/4 - null null
2025-08-13 10:07:20.304 +04:00 [INF] Executing endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 10:07:24.262 +04:00 [INF] Executed DbCommand (35ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CompanyId], [s].[GriIndex], [s].[KpiGroupId], [s].[Name], [s].[TimePeriod], [s].[Id0], [s].[Name0], [s0].[Id], [s0].[Comment], [s0].[CreatedAt], [s0].[KpiConfirmationId], [s0].[KpiId], [s0].[Status], [s0].[ValueId], [s0].[Id0], [s0].[JsonValue], [s0].[Name], [s0].[Type]
FROM (
    SELECT TOP(1) [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod], [k0].[Id] AS [Id0], [k0].[Name] AS [Name0]
    FROM [Kpis] AS [k]
    INNER JOIN [KpiGroups] AS [k0] ON [k].[KpiGroupId] = [k0].[Id]
    WHERE [k].[Id] = @__id_0
) AS [s]
LEFT JOIN (
    SELECT [k1].[Id], [k1].[Comment], [k1].[CreatedAt], [k1].[KpiConfirmationId], [k1].[KpiId], [k1].[Status], [k1].[ValueId], [d].[Id] AS [Id0], [d].[JsonValue], [d].[Name], [d].[Type]
    FROM [KpiValues] AS [k1]
    INNER JOIN [DynamicValues] AS [d] ON [k1].[ValueId] = [d].[Id]
) AS [s0] ON [s].[Id] = [s0].[KpiId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id]
2025-08-13 10:07:24.481 +04:00 [INF] Executed endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 10:07:24.659 +04:00 [INF] Source:[127.0.0.1] Request: GET https localhost:57679/Kpi/4   Responded with [200] in 4353ms
2025-08-13 10:07:24.671 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Kpi/4 - 200 3028 application/json 4498.79ms
2025-08-13 10:11:58.903 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-08-13 10:11:59.022 +04:00 [INF] Registered 27 endpoints in 1,847 milliseconds.
2025-08-13 10:12:02.648 +04:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 10:12:02.764 +04:00 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 10:12:02.955 +04:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 10:12:02.958 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 10:12:03.059 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-13 10:12:03.095 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 10:12:03.474 +04:00 [INF] Now listening on: https://localhost:57679
2025-08-13 10:12:03.474 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 10:12:03.474 +04:00 [INF] Hosting environment: Development
2025-08-13 10:12:03.474 +04:00 [INF] Content root path: E:\Work\KPI\KpiScope\src\KpiScope.Web
2025-08-13 10:12:03.655 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Kpi/4 - null null
2025-08-13 10:12:03.796 +04:00 [INF] Executing endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 10:12:08.313 +04:00 [INF] Executed DbCommand (35ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CompanyId], [s].[GriIndex], [s].[KpiGroupId], [s].[Name], [s].[TimePeriod], [s].[Id0], [s].[Name0], [s0].[Id], [s0].[Comment], [s0].[CreatedAt], [s0].[KpiConfirmationId], [s0].[KpiId], [s0].[Status], [s0].[ValueId], [s0].[Id0], [s0].[JsonValue], [s0].[Name], [s0].[Type]
FROM (
    SELECT TOP(1) [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod], [k0].[Id] AS [Id0], [k0].[Name] AS [Name0]
    FROM [Kpis] AS [k]
    INNER JOIN [KpiGroups] AS [k0] ON [k].[KpiGroupId] = [k0].[Id]
    WHERE [k].[Id] = @__id_0
) AS [s]
LEFT JOIN (
    SELECT [k1].[Id], [k1].[Comment], [k1].[CreatedAt], [k1].[KpiConfirmationId], [k1].[KpiId], [k1].[Status], [k1].[ValueId], [d].[Id] AS [Id0], [d].[JsonValue], [d].[Name], [d].[Type]
    FROM [KpiValues] AS [k1]
    INNER JOIN [DynamicValues] AS [d] ON [k1].[ValueId] = [d].[Id]
) AS [s0] ON [s].[Id] = [s0].[KpiId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id]
2025-08-13 10:12:08.694 +04:00 [INF] Executed endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 10:12:08.698 +04:00 [ERR] [500]: Unhandled Exception occurred. Unable to process the request.
Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: Cannot implicitly convert type 'System.Text.Json.JsonElement' to 'string'
   at CallSite.Target(Closure, CallSite, Object)
   at System.Dynamic.UpdateDelegates.UpdateAndExecute1[T0,TRet](CallSite site, T0 arg0)
   at KpiScope.Web.KPI.KpiEndpointService.GetKpiByIdAsync(GetKpiByIdRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\KpiEndpointService.cs:line 79
   at KpiScope.Web.KPI.GetById.GetbyId.HandleAsync(GetKpiByIdRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\GetById\GetbyId.cs:line 13
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at AutoWrapper.Base.WrapperBase.InvokeAsyncBase(HttpContext context, AutoWrapperMembers awm)
2025-08-13 10:12:08.846 +04:00 [INF] Source:[127.0.0.1] Request: GET https localhost:57679/Kpi/4   Responded with [500] in 5048ms
2025-08-13 10:12:08.860 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Kpi/4 - 500 165 application/json 5206.7365ms
2025-08-13 10:12:19.097 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Kpi/4 - null null
2025-08-13 10:12:19.102 +04:00 [INF] Executing endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 10:12:23.015 +04:00 [INF] Executed DbCommand (29ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CompanyId], [s].[GriIndex], [s].[KpiGroupId], [s].[Name], [s].[TimePeriod], [s].[Id0], [s].[Name0], [s0].[Id], [s0].[Comment], [s0].[CreatedAt], [s0].[KpiConfirmationId], [s0].[KpiId], [s0].[Status], [s0].[ValueId], [s0].[Id0], [s0].[JsonValue], [s0].[Name], [s0].[Type]
FROM (
    SELECT TOP(1) [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod], [k0].[Id] AS [Id0], [k0].[Name] AS [Name0]
    FROM [Kpis] AS [k]
    INNER JOIN [KpiGroups] AS [k0] ON [k].[KpiGroupId] = [k0].[Id]
    WHERE [k].[Id] = @__id_0
) AS [s]
LEFT JOIN (
    SELECT [k1].[Id], [k1].[Comment], [k1].[CreatedAt], [k1].[KpiConfirmationId], [k1].[KpiId], [k1].[Status], [k1].[ValueId], [d].[Id] AS [Id0], [d].[JsonValue], [d].[Name], [d].[Type]
    FROM [KpiValues] AS [k1]
    INNER JOIN [DynamicValues] AS [d] ON [k1].[ValueId] = [d].[Id]
) AS [s0] ON [s].[Id] = [s0].[KpiId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id]
2025-08-13 10:12:32.245 +04:00 [INF] Executed endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 10:12:32.245 +04:00 [ERR] [500]: Unhandled Exception occurred. Unable to process the request.
Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: Cannot implicitly convert type 'System.Text.Json.JsonElement' to 'string'
   at CallSite.Target(Closure, CallSite, Object)
   at KpiScope.Web.KPI.KpiEndpointService.GetKpiByIdAsync(GetKpiByIdRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\KpiEndpointService.cs:line 79
   at KpiScope.Web.KPI.GetById.GetbyId.HandleAsync(GetKpiByIdRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\GetById\GetbyId.cs:line 13
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at AutoWrapper.Base.WrapperBase.InvokeAsyncBase(HttpContext context, AutoWrapperMembers awm)
2025-08-13 10:12:32.247 +04:00 [INF] Source:[127.0.0.1] Request: GET https localhost:57679/Kpi/4   Responded with [500] in 13145ms
2025-08-13 10:12:32.248 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Kpi/4 - 500 165 application/json 13150.7567ms
2025-08-13 10:15:13.171 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-08-13 10:15:13.225 +04:00 [INF] Registered 27 endpoints in 2,585 milliseconds.
2025-08-13 10:15:14.762 +04:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 10:15:14.876 +04:00 [INF] Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 10:15:15.106 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 10:15:15.137 +04:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 10:15:15.232 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-13 10:15:15.277 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 10:15:15.687 +04:00 [INF] Now listening on: https://localhost:57679
2025-08-13 10:15:15.687 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 10:15:15.687 +04:00 [INF] Hosting environment: Development
2025-08-13 10:15:15.687 +04:00 [INF] Content root path: E:\Work\KPI\KpiScope\src\KpiScope.Web
2025-08-13 10:15:18.017 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Kpi/4 - null null
2025-08-13 10:15:18.237 +04:00 [INF] Executing endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 10:15:21.712 +04:00 [INF] Executed DbCommand (39ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CompanyId], [s].[GriIndex], [s].[KpiGroupId], [s].[Name], [s].[TimePeriod], [s].[Id0], [s].[Name0], [s0].[Id], [s0].[Comment], [s0].[CreatedAt], [s0].[KpiConfirmationId], [s0].[KpiId], [s0].[Status], [s0].[ValueId], [s0].[Id0], [s0].[JsonValue], [s0].[Name], [s0].[Type]
FROM (
    SELECT TOP(1) [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod], [k0].[Id] AS [Id0], [k0].[Name] AS [Name0]
    FROM [Kpis] AS [k]
    INNER JOIN [KpiGroups] AS [k0] ON [k].[KpiGroupId] = [k0].[Id]
    WHERE [k].[Id] = @__id_0
) AS [s]
LEFT JOIN (
    SELECT [k1].[Id], [k1].[Comment], [k1].[CreatedAt], [k1].[KpiConfirmationId], [k1].[KpiId], [k1].[Status], [k1].[ValueId], [d].[Id] AS [Id0], [d].[JsonValue], [d].[Name], [d].[Type]
    FROM [KpiValues] AS [k1]
    INNER JOIN [DynamicValues] AS [d] ON [k1].[ValueId] = [d].[Id]
) AS [s0] ON [s].[Id] = [s0].[KpiId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id]
2025-08-13 10:15:22.057 +04:00 [INF] Executed endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 10:15:22.060 +04:00 [ERR] [500]: Unhandled Exception occurred. Unable to process the request.
System.InvalidOperationException: The requested operation requires an element of type 'String', but the target element has type 'Object'.
   at System.Text.Json.ThrowHelper.ThrowJsonElementWrongTypeException(JsonTokenType expectedType, JsonTokenType actualType)
   at System.Text.Json.JsonDocument.CheckExpectedType(JsonTokenType expected, JsonTokenType actual)
   at System.Text.Json.JsonDocument.GetString(Int32 index, JsonTokenType expectedType)
   at System.Text.Json.JsonElement.GetString()
   at KpiScope.Web.KPI.KpiEndpointService.GetKpiByIdAsync(GetKpiByIdRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\KpiEndpointService.cs:line 80
   at KpiScope.Web.KPI.GetById.GetbyId.HandleAsync(GetKpiByIdRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\GetById\GetbyId.cs:line 13
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at AutoWrapper.Base.WrapperBase.InvokeAsyncBase(HttpContext context, AutoWrapperMembers awm)
2025-08-13 10:15:22.190 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/Kpi/4   Responded with [500] in 3949ms
2025-08-13 10:15:22.202 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Kpi/4 - 500 165 application/json 4187.9611ms
2025-08-13 10:15:25.549 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Kpi/4 - null null
2025-08-13 10:15:25.554 +04:00 [INF] Executing endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 10:15:28.508 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CompanyId], [s].[GriIndex], [s].[KpiGroupId], [s].[Name], [s].[TimePeriod], [s].[Id0], [s].[Name0], [s0].[Id], [s0].[Comment], [s0].[CreatedAt], [s0].[KpiConfirmationId], [s0].[KpiId], [s0].[Status], [s0].[ValueId], [s0].[Id0], [s0].[JsonValue], [s0].[Name], [s0].[Type]
FROM (
    SELECT TOP(1) [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod], [k0].[Id] AS [Id0], [k0].[Name] AS [Name0]
    FROM [Kpis] AS [k]
    INNER JOIN [KpiGroups] AS [k0] ON [k].[KpiGroupId] = [k0].[Id]
    WHERE [k].[Id] = @__id_0
) AS [s]
LEFT JOIN (
    SELECT [k1].[Id], [k1].[Comment], [k1].[CreatedAt], [k1].[KpiConfirmationId], [k1].[KpiId], [k1].[Status], [k1].[ValueId], [d].[Id] AS [Id0], [d].[JsonValue], [d].[Name], [d].[Type]
    FROM [KpiValues] AS [k1]
    INNER JOIN [DynamicValues] AS [d] ON [k1].[ValueId] = [d].[Id]
) AS [s0] ON [s].[Id] = [s0].[KpiId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id]
2025-08-13 10:16:15.129 +04:00 [INF] Executed endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 10:16:15.130 +04:00 [ERR] [500]: Unhandled Exception occurred. Unable to process the request.
System.InvalidOperationException: The requested operation requires an element of type 'String', but the target element has type 'Object'.
   at System.Text.Json.ThrowHelper.ThrowJsonElementWrongTypeException(JsonTokenType expectedType, JsonTokenType actualType)
   at System.Text.Json.JsonDocument.CheckExpectedType(JsonTokenType expected, JsonTokenType actual)
   at System.Text.Json.JsonDocument.GetString(Int32 index, JsonTokenType expectedType)
   at System.Text.Json.JsonElement.GetString()
   at KpiScope.Web.KPI.KpiEndpointService.GetKpiByIdAsync(GetKpiByIdRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\KpiEndpointService.cs:line 80
   at KpiScope.Web.KPI.GetById.GetbyId.HandleAsync(GetKpiByIdRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\GetById\GetbyId.cs:line 13
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at AutoWrapper.Base.WrapperBase.InvokeAsyncBase(HttpContext context, AutoWrapperMembers awm)
2025-08-13 10:16:15.132 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/Kpi/4   Responded with [500] in 49577ms
2025-08-13 10:16:15.133 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Kpi/4 - 500 165 application/json 49584.1048ms
2025-08-13 10:22:59.062 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-08-13 10:22:59.122 +04:00 [INF] Registered 27 endpoints in 1,631 milliseconds.
2025-08-13 10:23:00.934 +04:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 10:23:01.062 +04:00 [INF] Executed DbCommand (104ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 10:23:01.245 +04:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 10:23:01.247 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 10:23:01.342 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-13 10:23:01.383 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 10:23:01.766 +04:00 [INF] Now listening on: https://localhost:57679
2025-08-13 10:23:01.766 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 10:23:01.766 +04:00 [INF] Hosting environment: Development
2025-08-13 10:23:01.766 +04:00 [INF] Content root path: E:\Work\KPI\KpiScope\src\KpiScope.Web
2025-08-13 10:23:01.943 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Kpi/4 - null null
2025-08-13 10:23:02.330 +04:00 [INF] Executing endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 10:23:06.887 +04:00 [INF] Executed DbCommand (47ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CompanyId], [s].[GriIndex], [s].[KpiGroupId], [s].[Name], [s].[TimePeriod], [s].[Id0], [s].[Name0], [s0].[Id], [s0].[Comment], [s0].[CreatedAt], [s0].[KpiConfirmationId], [s0].[KpiId], [s0].[Status], [s0].[ValueId], [s0].[Id0], [s0].[JsonValue], [s0].[Name], [s0].[Type]
FROM (
    SELECT TOP(1) [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod], [k0].[Id] AS [Id0], [k0].[Name] AS [Name0]
    FROM [Kpis] AS [k]
    INNER JOIN [KpiGroups] AS [k0] ON [k].[KpiGroupId] = [k0].[Id]
    WHERE [k].[Id] = @__id_0
) AS [s]
LEFT JOIN (
    SELECT [k1].[Id], [k1].[Comment], [k1].[CreatedAt], [k1].[KpiConfirmationId], [k1].[KpiId], [k1].[Status], [k1].[ValueId], [d].[Id] AS [Id0], [d].[JsonValue], [d].[Name], [d].[Type]
    FROM [KpiValues] AS [k1]
    INNER JOIN [DynamicValues] AS [d] ON [k1].[ValueId] = [d].[Id]
) AS [s0] ON [s].[Id] = [s0].[KpiId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id]
2025-08-13 10:23:07.173 +04:00 [INF] Executed endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 10:23:07.421 +04:00 [INF] Source:[127.0.0.1] Request: GET https localhost:57679/Kpi/4   Responded with [200] in 5093ms
2025-08-13 10:23:07.436 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Kpi/4 - 200 542 application/json 5494.9356ms
2025-08-13 10:25:24.840 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Kpi/4 - null null
2025-08-13 10:25:24.860 +04:00 [INF] Executing endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 10:25:27.658 +04:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CompanyId], [s].[GriIndex], [s].[KpiGroupId], [s].[Name], [s].[TimePeriod], [s].[Id0], [s].[Name0], [s0].[Id], [s0].[Comment], [s0].[CreatedAt], [s0].[KpiConfirmationId], [s0].[KpiId], [s0].[Status], [s0].[ValueId], [s0].[Id0], [s0].[JsonValue], [s0].[Name], [s0].[Type]
FROM (
    SELECT TOP(1) [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod], [k0].[Id] AS [Id0], [k0].[Name] AS [Name0]
    FROM [Kpis] AS [k]
    INNER JOIN [KpiGroups] AS [k0] ON [k].[KpiGroupId] = [k0].[Id]
    WHERE [k].[Id] = @__id_0
) AS [s]
LEFT JOIN (
    SELECT [k1].[Id], [k1].[Comment], [k1].[CreatedAt], [k1].[KpiConfirmationId], [k1].[KpiId], [k1].[Status], [k1].[ValueId], [d].[Id] AS [Id0], [d].[JsonValue], [d].[Name], [d].[Type]
    FROM [KpiValues] AS [k1]
    INNER JOIN [DynamicValues] AS [d] ON [k1].[ValueId] = [d].[Id]
) AS [s0] ON [s].[Id] = [s0].[KpiId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id]
2025-08-13 10:25:27.671 +04:00 [INF] Executed endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 10:25:27.676 +04:00 [INF] Source:[127.0.0.1] Request: GET https localhost:57679/Kpi/4   Responded with [200] in 2816ms
2025-08-13 10:25:27.678 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Kpi/4 - 200 542 application/json 2839.0488ms
2025-08-13 10:26:30.030 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Kpi/4 - null null
2025-08-13 10:26:30.116 +04:00 [INF] Executing endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 10:26:35.324 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CompanyId], [s].[GriIndex], [s].[KpiGroupId], [s].[Name], [s].[TimePeriod], [s].[Id0], [s].[Name0], [s0].[Id], [s0].[Comment], [s0].[CreatedAt], [s0].[KpiConfirmationId], [s0].[KpiId], [s0].[Status], [s0].[ValueId], [s0].[Id0], [s0].[JsonValue], [s0].[Name], [s0].[Type]
FROM (
    SELECT TOP(1) [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod], [k0].[Id] AS [Id0], [k0].[Name] AS [Name0]
    FROM [Kpis] AS [k]
    INNER JOIN [KpiGroups] AS [k0] ON [k].[KpiGroupId] = [k0].[Id]
    WHERE [k].[Id] = @__id_0
) AS [s]
LEFT JOIN (
    SELECT [k1].[Id], [k1].[Comment], [k1].[CreatedAt], [k1].[KpiConfirmationId], [k1].[KpiId], [k1].[Status], [k1].[ValueId], [d].[Id] AS [Id0], [d].[JsonValue], [d].[Name], [d].[Type]
    FROM [KpiValues] AS [k1]
    INNER JOIN [DynamicValues] AS [d] ON [k1].[ValueId] = [d].[Id]
) AS [s0] ON [s].[Id] = [s0].[KpiId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id]
2025-08-13 10:26:35.328 +04:00 [INF] Executed endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 10:26:35.330 +04:00 [INF] Source:[127.0.0.1] Request: GET https localhost:57679/Kpi/4   Responded with [200] in 5214ms
2025-08-13 10:26:35.331 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Kpi/4 - 200 495 application/json 5301.5065ms
2025-08-13 10:32:49.818 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-08-13 10:32:49.877 +04:00 [INF] Registered 27 endpoints in 2,665 milliseconds.
2025-08-13 10:32:51.627 +04:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 10:32:51.799 +04:00 [INF] Executed DbCommand (148ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 10:32:52.084 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 10:32:52.086 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 10:32:52.197 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-13 10:32:52.235 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 10:32:52.622 +04:00 [INF] Now listening on: https://localhost:57679
2025-08-13 10:32:52.622 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 10:32:52.622 +04:00 [INF] Hosting environment: Development
2025-08-13 10:32:52.622 +04:00 [INF] Content root path: E:\Work\KPI\KpiScope\src\KpiScope.Web
2025-08-13 10:33:13.560 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi/AddValue - application/json 311
2025-08-13 10:33:13.771 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 10:33:13.934 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 10:33:14.155 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi/AddValue  {
  "kpiValue": {
    "kpiId": 4,
    "dynamicValue": {
      "layers": [
        {
          "type": 7,
          "value": "[color3, [oravenge, purpvele]]"
        },
      ],
      "name": "nested list"
    },
    "statusEnum": 1,
    "createdAt": "2025-08-13T05:45:07.688Z",
    "comment": "list color"
  }
} Responded with [400] in 392ms
2025-08-13 10:33:14.165 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi/AddValue - 400 440 application/json 607.1989ms
2025-08-13 10:33:25.666 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi/AddValue - application/json 310
2025-08-13 10:33:25.669 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 10:33:32.015 +04:00 [INF] Executed DbCommand (147ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DynamicValues] ([JsonValue], [Name], [Type])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-08-13 10:33:32.403 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 10:33:32.406 +04:00 [ERR] [500]: Unhandled Exception occurred. Unable to process the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at KpiScope.Web.Value.KpiValue.KpiValueService.CreateKpiValueAsync(CreateKpiValueRequest kpiValue) in E:\Work\KPI\KpiScope\src\KpiScope.Web\Value\KpiValue\KpiValueService.cs:line 24
   at KpiScope.Web.KPI.KpiEndpointService.AddValueAsync(AddValueRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\KpiEndpointService.cs:line 24
   at KpiScope.Web.KPI.AddValue.AddValue.HandleAsync(AddValueRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\AddValue\AddValue.cs:line 13
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at AutoWrapper.Base.WrapperBase.InvokeAsyncBase(HttpContext context, AutoWrapperMembers awm)
2025-08-13 10:33:32.422 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi/AddValue  {
  "kpiValue": {
    "kpiId": 4,
    "dynamicValue": {
      "layers": [
        {
          "type": 7,
          "value": "[color3, [oravenge, purpvele]]"
        }
      ],
      "name": "nested list"
    },
    "statusEnum": 1,
    "createdAt": "2025-08-13T05:45:07.688Z",
    "comment": "list color"
  }
} Responded with [500] in 6753ms
2025-08-13 10:33:32.433 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi/AddValue - 500 165 application/json 6766.361ms
2025-08-13 10:35:02.958 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-08-13 10:35:03.008 +04:00 [INF] Registered 27 endpoints in 1,458 milliseconds.
2025-08-13 10:35:05.561 +04:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 10:35:05.662 +04:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 10:35:05.788 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 10:35:05.823 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 10:35:05.922 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-13 10:35:05.968 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 10:35:06.565 +04:00 [INF] Now listening on: https://localhost:57679
2025-08-13 10:35:06.566 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 10:35:06.566 +04:00 [INF] Hosting environment: Development
2025-08-13 10:35:06.566 +04:00 [INF] Content root path: E:\Work\KPI\KpiScope\src\KpiScope.Web
2025-08-13 10:35:07.943 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi/AddValue - application/json 310
2025-08-13 10:35:08.210 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 10:35:12.253 +04:00 [INF] Executed DbCommand (59ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DynamicValues] ([JsonValue], [Name], [Type])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-08-13 10:35:12.523 +04:00 [INF] Executed DbCommand (66ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [KpiValues] ([Comment], [CreatedAt], [KpiConfirmationId], [KpiId], [Status], [ValueId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-13 10:35:12.621 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 10:35:12.976 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi/AddValue  {
  "kpiValue": {
    "kpiId": 4,
    "dynamicValue": {
      "layers": [
        {
          "type": 7,
          "value": "[color3, [oravenge, purpvele]]"
        }
      ],
      "name": "nested list"
    },
    "statusEnum": 1,
    "createdAt": "2025-08-13T05:45:07.688Z",
    "comment": "list color"
  }
} Responded with [200] in 4762ms
2025-08-13 10:35:12.998 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi/AddValue - 200 276 application/json 5058.2658ms
2025-08-13 10:35:19.950 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Kpi/4 - null null
2025-08-13 10:35:19.954 +04:00 [INF] Executing endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 10:35:25.474 +04:00 [INF] Executed DbCommand (48ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CompanyId], [s].[GriIndex], [s].[KpiGroupId], [s].[Name], [s].[TimePeriod], [s].[Id0], [s].[Name0], [s0].[Id], [s0].[Comment], [s0].[CreatedAt], [s0].[KpiConfirmationId], [s0].[KpiId], [s0].[Status], [s0].[ValueId], [s0].[Id0], [s0].[JsonValue], [s0].[Name], [s0].[Type]
FROM (
    SELECT TOP(1) [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod], [k0].[Id] AS [Id0], [k0].[Name] AS [Name0]
    FROM [Kpis] AS [k]
    INNER JOIN [KpiGroups] AS [k0] ON [k].[KpiGroupId] = [k0].[Id]
    WHERE [k].[Id] = @__id_0
) AS [s]
LEFT JOIN (
    SELECT [k1].[Id], [k1].[Comment], [k1].[CreatedAt], [k1].[KpiConfirmationId], [k1].[KpiId], [k1].[Status], [k1].[ValueId], [d].[Id] AS [Id0], [d].[JsonValue], [d].[Name], [d].[Type]
    FROM [KpiValues] AS [k1]
    INNER JOIN [DynamicValues] AS [d] ON [k1].[ValueId] = [d].[Id]
) AS [s0] ON [s].[Id] = [s0].[KpiId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id]
2025-08-13 10:35:25.557 +04:00 [INF] Executed endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 10:35:25.561 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/Kpi/4   Responded with [200] in 5606ms
2025-08-13 10:35:25.561 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Kpi/4 - 200 536 application/json 5611.8999ms
2025-08-13 11:54:32.905 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-08-13 11:54:32.972 +04:00 [INF] Registered 27 endpoints in 8,227 milliseconds.
2025-08-13 11:54:36.192 +04:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 11:54:36.572 +04:00 [INF] Executed DbCommand (337ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 11:54:36.621 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 11:54:36.629 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 11:54:36.765 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-13 11:54:36.833 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 11:54:37.887 +04:00 [INF] Now listening on: https://localhost:57679
2025-08-13 11:54:37.892 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 11:54:37.898 +04:00 [INF] Hosting environment: Development
2025-08-13 11:54:37.905 +04:00 [INF] Content root path: E:\Work\KPI\KpiScope\src\KpiScope.Web
2025-08-13 11:54:41.123 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2025-08-13 11:54:44.379 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html; charset=utf-8 3258.9031ms
2025-08-13 11:54:45.594 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2025-08-13 11:54:46.980 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json; charset=utf-8 1385.6625ms
2025-08-13 11:55:03.728 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi/AddValue - application/json 277
2025-08-13 11:55:03.782 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 11:55:04.994 +04:00 [ERR] Failed executing DbCommand (251ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DynamicValues] ([JsonValue], [Name], [Types])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-08-13 11:55:05.056 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'KpiScope.Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Types'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3f90d287-d500-4c3f-9583-780664e677e6
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Types'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3f90d287-d500-4c3f-9583-780664e677e6
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-13 11:55:05.099 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 11:55:05.107 +04:00 [ERR] [500]: Unhandled Exception occurred. Unable to process the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Types'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3f90d287-d500-4c3f-9583-780664e677e6
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.SaveChangesAsync(CancellationToken cancellationToken)
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.AddAsync(T entity, CancellationToken cancellationToken)
   at KpiScope.Web.Value.DynamicValue.DynamicValueService.CreateDynamicValueAsync(CreateDynamicValueRequest dynamicValue) in E:\Work\KPI\KpiScope\src\KpiScope.Web\Value\DynamicValue\DynamicValueService.cs:line 41
   at KpiScope.Web.Value.KpiValue.KpiValueService.CreateKpiValueAsync(CreateKpiValueRequest kpiValue) in E:\Work\KPI\KpiScope\src\KpiScope.Web\Value\KpiValue\KpiValueService.cs:line 22
   at KpiScope.Web.KPI.KpiEndpointService.AddValueAsync(AddValueRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\KpiEndpointService.cs:line 24
   at KpiScope.Web.KPI.AddValue.AddValue.HandleAsync(AddValueRequest request, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\AddValue\AddValue.cs:line 13
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at AutoWrapper.Base.WrapperBase.InvokeAsyncBase(HttpContext context, AutoWrapperMembers awm)
2025-08-13 11:55:05.222 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi/AddValue  {
  "kpiValue": {
    "kpiId": 1,
    "dynamicValue": {
      "layers": [
        {
          "type": 1,
          "value": "string"
        }
      ],
      "name": "string"
    },
    "statusEnum": 1,
    "createdAt": "2025-08-13T07:54:53.913Z",
    "comment": "string"
  }
} Responded with [500] in 1444ms
2025-08-13 11:55:05.237 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi/AddValue - 500 165 application/json 1509.2868ms
2025-08-13 11:56:01.966 +04:00 [INF] Application is shutting down...
2025-08-13 11:56:25.033 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-08-13 11:56:25.101 +04:00 [INF] Registered 27 endpoints in 1,101 milliseconds.
2025-08-13 11:56:27.189 +04:00 [INF] Executed DbCommand (112ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 11:56:27.820 +04:00 [INF] Executed DbCommand (185ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 11:56:27.869 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 11:56:27.902 +04:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 11:56:27.970 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-13 11:56:27.999 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 11:56:28.377 +04:00 [INF] Now listening on: https://localhost:57679
2025-08-13 11:56:28.380 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 11:56:28.382 +04:00 [INF] Hosting environment: Development
2025-08-13 11:56:28.384 +04:00 [INF] Content root path: E:\Work\KPI\KpiScope\src\KpiScope.Web
2025-08-13 11:56:28.813 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2025-08-13 11:56:29.195 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html; charset=utf-8 387.0155ms
2025-08-13 11:56:30.019 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2025-08-13 11:56:31.143 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json; charset=utf-8 1124.7719ms
2025-08-13 11:56:37.291 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Kpi - null null
2025-08-13 11:56:37.325 +04:00 [INF] Executing endpoint 'HTTP: GET /Kpi'
2025-08-13 11:56:38.820 +04:00 [ERR] Failed executing DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod], [k0].[Id], [k0].[Name], [s].[Id], [s].[Comment], [s].[CreatedAt], [s].[KpiConfirmationId], [s].[KpiId], [s].[Status], [s].[ValueId], [s].[Id0], [s].[JsonValue], [s].[Name], [s].[Types]
FROM [Kpis] AS [k]
INNER JOIN [KpiGroups] AS [k0] ON [k].[KpiGroupId] = [k0].[Id]
LEFT JOIN (
    SELECT [k1].[Id], [k1].[Comment], [k1].[CreatedAt], [k1].[KpiConfirmationId], [k1].[KpiId], [k1].[Status], [k1].[ValueId], [d].[Id] AS [Id0], [d].[JsonValue], [d].[Name], [d].[Types]
    FROM [KpiValues] AS [k1]
    INNER JOIN [DynamicValues] AS [d] ON [k1].[ValueId] = [d].[Id]
) AS [s] ON [k].[Id] = [s].[KpiId]
ORDER BY [k].[Id], [k0].[Id], [s].[Id]
2025-08-13 11:56:38.848 +04:00 [ERR] An exception occurred while iterating over the results of a query for context type 'KpiScope.Infrastructure.Data.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Types'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:48a5e6cc-eeb3-48e3-afe1-d0f0fee7b0b9
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Types'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:48a5e6cc-eeb3-48e3-afe1-d0f0fee7b0b9
Error Number:207,State:1,Class:16
2025-08-13 11:56:38.873 +04:00 [INF] Executed endpoint 'HTTP: GET /Kpi'
2025-08-13 11:56:38.879 +04:00 [ERR] [500]: Unhandled Exception occurred. Unable to process the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Types'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.ListAsync(ISpecification`1 specification, CancellationToken cancellationToken)
   at KpiScope.Web.KPI.KpiEndpointService.ListKpiAsync(CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\KpiEndpointService.cs:line 87
   at KpiScope.Web.KPI.List.List.HandleAsync(CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KPI\List\List.cs:line 13
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at AutoWrapper.Base.WrapperBase.InvokeAsyncBase(HttpContext context, AutoWrapperMembers awm)
ClientConnectionId:48a5e6cc-eeb3-48e3-afe1-d0f0fee7b0b9
Error Number:207,State:1,Class:16
2025-08-13 11:56:38.958 +04:00 [INF] Source:[127.0.0.1] Request: GET https localhost:57679/Kpi   Responded with [500] in 1639ms
2025-08-13 11:56:38.967 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Kpi - 500 165 application/json 1675.8067ms
2025-08-13 11:57:04.578 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Companies - null null
2025-08-13 11:57:04.588 +04:00 [INF] Executing endpoint 'HTTP: GET /Companies'
2025-08-13 11:57:04.650 +04:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[Name]
FROM [Companies] AS [c]
2025-08-13 11:57:04.784 +04:00 [INF] Executed endpoint 'HTTP: GET /Companies'
2025-08-13 11:57:04.838 +04:00 [INF] Source:[127.0.0.1] Request: GET https localhost:57679/Companies   Responded with [200] in 249ms
2025-08-13 11:57:04.840 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Companies - 200 165 application/json 262.0799ms
2025-08-13 11:57:20.960 +04:00 [INF] Application is shutting down...
2025-08-13 11:57:31.602 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-08-13 11:57:31.671 +04:00 [INF] Registered 27 endpoints in 936 milliseconds.
2025-08-13 11:57:33.310 +04:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 11:57:33.480 +04:00 [INF] Executed DbCommand (117ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 11:57:33.564 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 11:57:36.851 +04:00 [INF] Executed DbCommand (3,172ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [KPI] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2025-08-13 11:57:37.359 +04:00 [INF] Executed DbCommand (497ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [KPI];
2025-08-13 11:57:38.103 +04:00 [INF] Executed DbCommand (481ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [KPI];
2025-08-13 11:57:38.266 +04:00 [INF] Executed DbCommand (148ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [KPI] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-08-13 11:57:38.301 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 11:57:38.586 +04:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Companies] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Address] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Companies] PRIMARY KEY ([Id])
);
2025-08-13 11:57:38.613 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DynamicValues] (
    [Id] int NOT NULL IDENTITY,
    [Types] nvarchar(max) NOT NULL,
    [JsonValue] nvarchar(max) NOT NULL,
    [Name] nvarchar(max) NULL,
    CONSTRAINT [PK_DynamicValues] PRIMARY KEY ([Id])
);
2025-08-13 11:57:38.635 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [KpiGroups] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_KpiGroups] PRIMARY KEY ([Id])
);
2025-08-13 11:57:38.656 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Username] nvarchar(max) NOT NULL,
    [Email] nvarchar(max) NOT NULL,
    [PasswordHash] nvarchar(max) NOT NULL,
    [CompanyId] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Users_Companies_CompanyId] FOREIGN KEY ([CompanyId]) REFERENCES [Companies] ([Id]) ON DELETE CASCADE
);
2025-08-13 11:57:38.682 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Kpis] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [GriIndex] int NOT NULL,
    [TimePeriod] int NOT NULL,
    [KpiGroupId] int NOT NULL,
    [CompanyId] int NULL,
    CONSTRAINT [PK_Kpis] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Kpis_Companies_CompanyId] FOREIGN KEY ([CompanyId]) REFERENCES [Companies] ([Id]),
    CONSTRAINT [FK_Kpis_KpiGroups_KpiGroupId] FOREIGN KEY ([KpiGroupId]) REFERENCES [KpiGroups] ([Id]) ON DELETE CASCADE
);
2025-08-13 11:57:38.711 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [KpiGroupCompanys] (
    [Id] int NOT NULL IDENTITY,
    [KpiGroupId] int NOT NULL,
    [CompanyId] int NOT NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_KpiGroupCompanys] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_KpiGroupCompanys_Companies_CompanyId] FOREIGN KEY ([CompanyId]) REFERENCES [Companies] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_KpiGroupCompanys_KpiGroups_KpiGroupId] FOREIGN KEY ([KpiGroupId]) REFERENCES [KpiGroups] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_KpiGroupCompanys_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2025-08-13 11:57:38.735 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [KpiConfirmations] (
    [Id] int NOT NULL IDENTITY,
    [KpiGroupCompanyId] int NOT NULL,
    [StepNumber] int NOT NULL,
    CONSTRAINT [PK_KpiConfirmations] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_KpiConfirmations_KpiGroupCompanys_KpiGroupCompanyId] FOREIGN KEY ([KpiGroupCompanyId]) REFERENCES [KpiGroupCompanys] ([Id]) ON DELETE CASCADE
);
2025-08-13 11:57:38.768 +04:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [KpiConfirmationUsers] (
    [Id] int NOT NULL IDENTITY,
    [KpiConfirmationId] int NOT NULL,
    [UserId] int NOT NULL,
    [StepNumber] int NOT NULL,
    [IsConfirmed] bit NOT NULL,
    [Comment] nvarchar(max) NOT NULL,
    [ActionDate] datetime2 NOT NULL,
    CONSTRAINT [PK_KpiConfirmationUsers] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_KpiConfirmationUsers_KpiConfirmations_KpiConfirmationId] FOREIGN KEY ([KpiConfirmationId]) REFERENCES [KpiConfirmations] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_KpiConfirmationUsers_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2025-08-13 11:57:38.800 +04:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [KpiValues] (
    [Id] int NOT NULL IDENTITY,
    [KpiId] int NOT NULL,
    [ValueId] int NOT NULL,
    [Status] int NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [Comment] nvarchar(max) NOT NULL,
    [KpiConfirmationId] int NULL,
    CONSTRAINT [PK_KpiValues] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_KpiValues_DynamicValues_ValueId] FOREIGN KEY ([ValueId]) REFERENCES [DynamicValues] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_KpiValues_KpiConfirmations_KpiConfirmationId] FOREIGN KEY ([KpiConfirmationId]) REFERENCES [KpiConfirmations] ([Id]),
    CONSTRAINT [FK_KpiValues_Kpis_KpiId] FOREIGN KEY ([KpiId]) REFERENCES [Kpis] ([Id]) ON DELETE CASCADE
);
2025-08-13 11:57:38.820 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_KpiConfirmations_KpiGroupCompanyId] ON [KpiConfirmations] ([KpiGroupCompanyId]);
2025-08-13 11:57:38.838 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_KpiConfirmationUsers_KpiConfirmationId] ON [KpiConfirmationUsers] ([KpiConfirmationId]);
2025-08-13 11:57:38.856 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_KpiConfirmationUsers_UserId] ON [KpiConfirmationUsers] ([UserId]);
2025-08-13 11:57:38.877 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_KpiGroupCompanys_CompanyId] ON [KpiGroupCompanys] ([CompanyId]);
2025-08-13 11:57:38.890 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_KpiGroupCompanys_KpiGroupId] ON [KpiGroupCompanys] ([KpiGroupId]);
2025-08-13 11:57:38.904 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_KpiGroupCompanys_UserId] ON [KpiGroupCompanys] ([UserId]);
2025-08-13 11:57:38.919 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Kpis_CompanyId] ON [Kpis] ([CompanyId]);
2025-08-13 11:57:38.936 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Kpis_KpiGroupId] ON [Kpis] ([KpiGroupId]);
2025-08-13 11:57:38.949 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_KpiValues_KpiConfirmationId] ON [KpiValues] ([KpiConfirmationId]);
2025-08-13 11:57:38.963 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_KpiValues_KpiId] ON [KpiValues] ([KpiId]);
2025-08-13 11:57:38.975 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_KpiValues_ValueId] ON [KpiValues] ([ValueId]);
2025-08-13 11:57:38.989 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_CompanyId] ON [Users] ([CompanyId]);
2025-08-13 11:57:39.109 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-13 11:57:39.158 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 11:57:39.798 +04:00 [INF] Now listening on: https://localhost:57679
2025-08-13 11:57:39.805 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 11:57:39.812 +04:00 [INF] Hosting environment: Development
2025-08-13 11:57:39.819 +04:00 [INF] Content root path: E:\Work\KPI\KpiScope\src\KpiScope.Web
2025-08-13 11:57:47.070 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2025-08-13 11:57:47.382 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html; charset=utf-8 312.8601ms
2025-08-13 11:57:47.983 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2025-08-13 11:57:49.020 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json; charset=utf-8 1037.7729ms
2025-08-13 11:57:50.683 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Companies - null null
2025-08-13 11:57:50.724 +04:00 [INF] Executing endpoint 'HTTP: GET /Companies'
2025-08-13 11:57:51.452 +04:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[Name]
FROM [Companies] AS [c]
2025-08-13 11:57:51.477 +04:00 [INF] Executed endpoint 'HTTP: GET /Companies'
2025-08-13 11:57:51.483 +04:00 [ERR] [500]: Unhandled Exception occurred. Unable to process the request.
System.InvalidOperationException: No companies found.
   at KpiScope.Web.Company.CompanyEndpointService.ListAsync(CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\Company\CompanyEndpointService.cs:line 67
   at KpiScope.Web.Company.List.List.HandleAsync(CancellationToken cancellationToken) in E:\Work\KPI\KpiScope\src\KpiScope.Web\Company\List\List.cs:line 13
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at AutoWrapper.Base.WrapperBase.InvokeAsyncBase(HttpContext context, AutoWrapperMembers awm)
2025-08-13 11:57:51.566 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/Companies   Responded with [500] in 845ms
2025-08-13 11:57:51.572 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Companies - 500 165 application/json 888.7708ms
2025-08-13 11:57:59.686 +04:00 [INF] Application is shutting down...
2025-08-13 11:58:16.266 +04:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-08-13 11:58:16.327 +04:00 [INF] Registered 27 endpoints in 1,001 milliseconds.
2025-08-13 11:58:18.158 +04:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 11:58:18.397 +04:00 [INF] Executed DbCommand (198ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 11:58:18.429 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-13 11:58:18.444 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-08-13 11:58:18.524 +04:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-13 11:58:18.547 +04:00 [INF] User profile is available. Using 'C:\Users\zakir\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-13 11:58:19.139 +04:00 [INF] Now listening on: https://localhost:57679
2025-08-13 11:58:19.143 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-13 11:58:19.147 +04:00 [INF] Hosting environment: Development
2025-08-13 11:58:19.153 +04:00 [INF] Content root path: E:\Work\KPI\KpiScope\src\KpiScope.Web
2025-08-13 11:58:22.151 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/index.html - null null
2025-08-13 11:58:22.434 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/index.html - 200 null text/html; charset=utf-8 284.775ms
2025-08-13 11:58:22.931 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - null null
2025-08-13 11:58:24.857 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/swagger/v1/swagger.json - 200 null application/json; charset=utf-8 1925.7328ms
2025-08-13 11:58:35.495 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Companies - application/json 45
2025-08-13 11:58:35.592 +04:00 [INF] Executing endpoint 'HTTP: POST /Companies'
2025-08-13 11:58:36.826 +04:00 [INF] Executed DbCommand (58ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Companies] ([Address], [Name])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-08-13 11:58:36.971 +04:00 [INF] Executed endpoint 'HTTP: POST /Companies'
2025-08-13 11:58:37.115 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Companies  {
  "name": "string",
  "address": "string"
} Responded with [200] in 1531ms
2025-08-13 11:58:37.136 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Companies - 200 150 application/json 1641.1271ms
2025-08-13 11:58:42.938 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Companies - null null
2025-08-13 11:58:42.951 +04:00 [INF] Executing endpoint 'HTTP: GET /Companies'
2025-08-13 11:58:43.825 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Address], [c].[Name]
FROM [Companies] AS [c]
2025-08-13 11:58:43.915 +04:00 [INF] Executed endpoint 'HTTP: GET /Companies'
2025-08-13 11:58:43.962 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/Companies   Responded with [200] in 1011ms
2025-08-13 11:58:43.969 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Companies - 200 169 application/json 1031.2613ms
2025-08-13 11:58:59.411 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/KpiGroups - application/json 32
2025-08-13 11:58:59.430 +04:00 [INF] Executing endpoint 'HTTP: POST /KpiGroups'
2025-08-13 11:58:59.524 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [KpiGroups] ([Name])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2025-08-13 11:58:59.550 +04:00 [INF] Executed endpoint 'HTTP: POST /KpiGroups'
2025-08-13 11:58:59.559 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/KpiGroups  {
  "name": "KPI Group Name 1"
} Responded with [200] in 130ms
2025-08-13 11:58:59.569 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/KpiGroups - 200 134 application/json 157.7188ms
2025-08-13 11:59:04.806 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/KpiGroups - application/json 32
2025-08-13 11:59:04.828 +04:00 [INF] Executing endpoint 'HTTP: POST /KpiGroups'
2025-08-13 11:59:04.844 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [KpiGroups] ([Name])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2025-08-13 11:59:04.856 +04:00 [INF] Executed endpoint 'HTTP: POST /KpiGroups'
2025-08-13 11:59:04.862 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/KpiGroups  {
  "name": "KPI Group Name 2"
} Responded with [200] in 34ms
2025-08-13 11:59:04.868 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/KpiGroups - 200 134 application/json 62.6455ms
2025-08-13 11:59:10.993 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/KpiGroups - null null
2025-08-13 11:59:11.026 +04:00 [INF] Executing endpoint 'HTTP: GET /KpiGroups'
2025-08-13 11:59:11.056 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [k].[Id], [k].[Name]
FROM [KpiGroups] AS [k]
2025-08-13 11:59:11.093 +04:00 [INF] Executed endpoint 'HTTP: GET /KpiGroups'
2025-08-13 11:59:11.097 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/KpiGroups   Responded with [200] in 71ms
2025-08-13 11:59:11.099 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/KpiGroups - 200 216 application/json 106.7045ms
2025-08-13 11:59:35.991 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/auth/Register - application/json 100
2025-08-13 11:59:35.997 +04:00 [INF] Executing endpoint 'HTTP: POST auth/Register'
2025-08-13 11:59:36.262 +04:00 [INF] Executed DbCommand (19ms) [Parameters=[@__mail_0='?' (Size = 4000), @__username_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CompanyId], [u].[Email], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__mail_0 OR [u].[Username] = @__username_1
2025-08-13 11:59:36.351 +04:00 [INF] Executed DbCommand (38ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CompanyId], [Email], [PasswordHash], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-08-13 11:59:36.410 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'KpiScope.Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Users_Companies_CompanyId". The conflict occurred in database "KPI", table "dbo.Companies", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:de44f93f-fd18-4a5c-830e-808f676de3e1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Users_Companies_CompanyId". The conflict occurred in database "KPI", table "dbo.Companies", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:de44f93f-fd18-4a5c-830e-808f676de3e1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-13 11:59:36.438 +04:00 [ERR] Exception Occured
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Users_Companies_CompanyId". The conflict occurred in database "KPI", table "dbo.Companies", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:de44f93f-fd18-4a5c-830e-808f676de3e1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.SaveChangesAsync(CancellationToken cancellationToken)
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.AddAsync(T entity, CancellationToken cancellationToken)
   at KpiScope.Web.Register.RegisterEndpointService.RegisterAsync(RegisterRequest req, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\Register\RegisterEndpointService.cs:line 27
2025-08-13 11:59:36.493 +04:00 [ERR] Exception
System.InvalidOperationException: An error occurred while saving the entity changes. See the inner exception for details.
   at KpiScope.Web.Register.ResgisterEndpoint.HandleAsync(RegisterRequest req, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\Register\RegisterEndpoint.cs:line 23
2025-08-13 11:59:36.509 +04:00 [INF] Executed endpoint 'HTTP: POST auth/Register'
2025-08-13 11:59:36.519 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/auth/Register  {
  "username": "string",
  "password": "string",
  "email": "user@example.com",
  "comapanyId": 0
} Responded with [400] in 521ms
2025-08-13 11:59:36.523 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/auth/Register - 400 217 application/json 532.1403ms
2025-08-13 11:59:44.895 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/auth/Register - application/json 100
2025-08-13 11:59:44.941 +04:00 [INF] Executing endpoint 'HTTP: POST auth/Register'
2025-08-13 11:59:44.978 +04:00 [INF] Executed DbCommand (16ms) [Parameters=[@__mail_0='?' (Size = 4000), @__username_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CompanyId], [u].[Email], [u].[PasswordHash], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__mail_0 OR [u].[Username] = @__username_1
2025-08-13 11:59:45.002 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CompanyId], [Email], [PasswordHash], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-08-13 11:59:45.052 +04:00 [INF] Executed DbCommand (27ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CompanyId] = @p0, [Email] = @p1, [PasswordHash] = @p2, [Username] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-08-13 11:59:45.067 +04:00 [INF] Executed endpoint 'HTTP: POST auth/Register'
2025-08-13 11:59:45.074 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/auth/Register  {
  "username": "string",
  "password": "string",
  "email": "user@example.com",
  "comapanyId": 1
} Responded with [200] in 133ms
2025-08-13 11:59:45.079 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/auth/Register - 200 162 application/json 184.589ms
2025-08-13 11:59:50.502 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/KpiGroupCompanies - application/json 54
2025-08-13 11:59:50.511 +04:00 [INF] Executing endpoint 'HTTP: POST /KpiGroupCompanies'
2025-08-13 11:59:50.569 +04:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [KpiGroupCompanys] ([CompanyId], [KpiGroupId], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-08-13 11:59:50.578 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'KpiScope.Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_KpiGroupCompanys_Users_UserId". The conflict occurred in database "KPI", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:de44f93f-fd18-4a5c-830e-808f676de3e1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_KpiGroupCompanys_Users_UserId". The conflict occurred in database "KPI", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:de44f93f-fd18-4a5c-830e-808f676de3e1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-13 11:59:50.692 +04:00 [INF] Executed endpoint 'HTTP: POST /KpiGroupCompanies'
2025-08-13 11:59:50.698 +04:00 [ERR] [500]: Unhandled Exception occurred. Unable to process the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_KpiGroupCompanys_Users_UserId". The conflict occurred in database "KPI", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:de44f93f-fd18-4a5c-830e-808f676de3e1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.SaveChangesAsync(CancellationToken cancellationToken)
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.AddAsync(T entity, CancellationToken cancellationToken)
   at KpiScope.Web.KpiGroupCompany.KpiGroupCompanyEndpointService.CreateAsync(CreateKpiGroupCompanyRequest req, CancellationToken ct) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KpiGroupCompany\KpiGroupCompanyEndpointService.cs:line 19
   at KpiScope.Web.KpiGroupCompany.Create.Create.HandleAsync(CreateKpiGroupCompanyRequest request, CancellationToken cancellationToken) in E:\Work\KPI\KpiScope\src\KpiScope.Web\KpiGroupCompany\Create\Create.cs:line 17
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at FastEndpoints.Endpoint`2.ExecAsync(CancellationToken ct)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at AutoWrapper.Base.WrapperBase.InvokeAsyncBase(HttpContext context, AutoWrapperMembers awm)
2025-08-13 11:59:50.735 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/KpiGroupCompanies  {
  "kpiGroupId": 1,
  "companyId": 1,
  "userId": 1
} Responded with [500] in 223ms
2025-08-13 11:59:50.739 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/KpiGroupCompanies - 500 165 application/json 237.5985ms
2025-08-13 12:00:25.651 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/KpiGroupCompanies - application/json 54
2025-08-13 12:00:25.660 +04:00 [INF] Executing endpoint 'HTTP: POST /KpiGroupCompanies'
2025-08-13 12:00:25.676 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [KpiGroupCompanys] ([CompanyId], [KpiGroupId], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-08-13 12:00:25.706 +04:00 [INF] Executed endpoint 'HTTP: POST /KpiGroupCompanies'
2025-08-13 12:00:25.714 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/KpiGroupCompanies  {
  "kpiGroupId": 2,
  "companyId": 1,
  "userId": 2
} Responded with [200] in 53ms
2025-08-13 12:00:25.720 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/KpiGroupCompanies - 200 162 application/json 68.4207ms
2025-08-13 12:00:43.701 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi - application/json 77
2025-08-13 12:00:43.705 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi'
2025-08-13 12:00:43.835 +04:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Kpis] ([CompanyId], [GriIndex], [KpiGroupId], [Name], [TimePeriod])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-08-13 12:00:43.863 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi'
2025-08-13 12:00:43.867 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi  {
  "name": "string",
  "griIndex": 1,
  "timePeriod": 1,
  "kpiGroupId": 1
} Responded with [200] in 161ms
2025-08-13 12:00:43.870 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi - 200 188 application/json 169.2499ms
2025-08-13 12:01:05.807 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi/AddValue - application/json 273
2025-08-13 12:01:05.813 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 12:01:05.927 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DynamicValues] ([JsonValue], [Name], [Types])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-08-13 12:01:06.027 +04:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [KpiValues] ([Comment], [CreatedAt], [KpiConfirmationId], [KpiId], [Status], [ValueId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-13 12:01:06.054 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 12:01:06.059 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi/AddValue  {
  "kpiValue": {
    "kpiId": 1,
    "dynamicValue": {
      "layers": [
        {
          "type": 1,
          "value": "test"
        }
      ],
      "name": "test"
    },
    "statusEnum": 1,
    "createdAt": "2025-08-13T08:00:48.642Z",
    "comment": "string"
  }
} Responded with [200] in 245ms
2025-08-13 12:01:06.064 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi/AddValue - 200 276 application/json 256.2124ms
2025-08-13 12:01:17.555 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Kpi/1 - null null
2025-08-13 12:01:17.560 +04:00 [INF] Executing endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 12:01:17.855 +04:00 [INF] Executed DbCommand (50ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CompanyId], [s].[GriIndex], [s].[KpiGroupId], [s].[Name], [s].[TimePeriod], [s].[Id0], [s].[Name0], [s0].[Id], [s0].[Comment], [s0].[CreatedAt], [s0].[KpiConfirmationId], [s0].[KpiId], [s0].[Status], [s0].[ValueId], [s0].[Id0], [s0].[JsonValue], [s0].[Name], [s0].[Types]
FROM (
    SELECT TOP(1) [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod], [k0].[Id] AS [Id0], [k0].[Name] AS [Name0]
    FROM [Kpis] AS [k]
    INNER JOIN [KpiGroups] AS [k0] ON [k].[KpiGroupId] = [k0].[Id]
    WHERE [k].[Id] = @__id_0
) AS [s]
LEFT JOIN (
    SELECT [k1].[Id], [k1].[Comment], [k1].[CreatedAt], [k1].[KpiConfirmationId], [k1].[KpiId], [k1].[Status], [k1].[ValueId], [d].[Id] AS [Id0], [d].[JsonValue], [d].[Name], [d].[Types]
    FROM [KpiValues] AS [k1]
    INNER JOIN [DynamicValues] AS [d] ON [k1].[ValueId] = [d].[Id]
) AS [s0] ON [s].[Id] = [s0].[KpiId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id]
2025-08-13 12:01:17.921 +04:00 [INF] Executed endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 12:01:17.924 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/Kpi/1   Responded with [200] in 364ms
2025-08-13 12:01:17.927 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Kpi/1 - 200 285 application/json 372.438ms
2025-08-13 12:49:41.170 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi/AddValue - application/json 275
2025-08-13 12:49:41.226 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 12:49:41.446 +04:00 [INF] Executed DbCommand (80ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DynamicValues] ([JsonValue], [Name], [Types])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-08-13 12:49:41.489 +04:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [KpiValues] ([Comment], [CreatedAt], [KpiConfirmationId], [KpiId], [Status], [ValueId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-13 12:49:41.499 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 12:49:41.531 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi/AddValue  {
  "kpiValue": {
    "kpiId": 1,
    "dynamicValue": {
      "layers": [
        {
          "type": 1,
          "value": "test2"
        }
      ],
      "name": "test2"
    },
    "statusEnum": 1,
    "createdAt": "2025-08-13T08:00:48.642Z",
    "comment": "string"
  }
} Responded with [200] in 313ms
2025-08-13 12:49:41.535 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi/AddValue - 200 276 application/json 366.9876ms
2025-08-13 12:49:44.415 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Kpi/1 - null null
2025-08-13 12:49:44.424 +04:00 [INF] Executing endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 12:49:44.476 +04:00 [INF] Executed DbCommand (27ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CompanyId], [s].[GriIndex], [s].[KpiGroupId], [s].[Name], [s].[TimePeriod], [s].[Id0], [s].[Name0], [s0].[Id], [s0].[Comment], [s0].[CreatedAt], [s0].[KpiConfirmationId], [s0].[KpiId], [s0].[Status], [s0].[ValueId], [s0].[Id0], [s0].[JsonValue], [s0].[Name], [s0].[Types]
FROM (
    SELECT TOP(1) [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod], [k0].[Id] AS [Id0], [k0].[Name] AS [Name0]
    FROM [Kpis] AS [k]
    INNER JOIN [KpiGroups] AS [k0] ON [k].[KpiGroupId] = [k0].[Id]
    WHERE [k].[Id] = @__id_0
) AS [s]
LEFT JOIN (
    SELECT [k1].[Id], [k1].[Comment], [k1].[CreatedAt], [k1].[KpiConfirmationId], [k1].[KpiId], [k1].[Status], [k1].[ValueId], [d].[Id] AS [Id0], [d].[JsonValue], [d].[Name], [d].[Types]
    FROM [KpiValues] AS [k1]
    INNER JOIN [DynamicValues] AS [d] ON [k1].[ValueId] = [d].[Id]
) AS [s0] ON [s].[Id] = [s0].[KpiId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id]
2025-08-13 12:49:44.485 +04:00 [INF] Executed endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 12:49:44.488 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/Kpi/1   Responded with [200] in 64ms
2025-08-13 12:49:44.490 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Kpi/1 - 200 301 application/json 75.5599ms
2025-08-13 12:50:54.592 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi/AddValue - application/json 315
2025-08-13 12:50:54.596 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 12:50:54.646 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 12:50:54.651 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi/AddValue  {
  "kpiValue": {
    "kpiId": 1,
    "dynamicValue": {
      "layers": [
        {
          "type": 7,
          "value": "["green", "red"], [[1,2],["Baku","Istanbul"]]"
        }
      ],
      "name": "test2"
    },
    "statusEnum": 1,
    "createdAt": "2025-08-13T08:00:48.642Z",
    "comment": "string"
  }
} Responded with [400] in 55ms
2025-08-13 12:50:54.653 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi/AddValue - 400 389 application/json 61.3747ms
2025-08-13 12:51:37.342 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi/AddValue - application/json 307
2025-08-13 12:51:37.349 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 12:51:37.362 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DynamicValues] ([JsonValue], [Name], [Types])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-08-13 12:51:37.374 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [KpiValues] ([Comment], [CreatedAt], [KpiConfirmationId], [KpiId], [Status], [ValueId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-13 12:51:37.381 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 12:51:37.385 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi/AddValue  {
  "kpiValue": {
    "kpiId": 1,
    "dynamicValue": {
      "layers": [
        {
          "type": 7,
          "value": "[green, red], [[1,2],[Baku,Istanbul]]"
        }
      ],
      "name": "test2"
    },
    "statusEnum": 1,
    "createdAt": "2025-08-13T08:00:48.642Z",
    "comment": "string"
  }
} Responded with [200] in 35ms
2025-08-13 12:51:37.388 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi/AddValue - 200 276 application/json 46.3302ms
2025-08-13 12:51:42.934 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Kpi/1 - null null
2025-08-13 12:51:42.940 +04:00 [INF] Executing endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 12:51:42.961 +04:00 [INF] Executed DbCommand (12ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CompanyId], [s].[GriIndex], [s].[KpiGroupId], [s].[Name], [s].[TimePeriod], [s].[Id0], [s].[Name0], [s0].[Id], [s0].[Comment], [s0].[CreatedAt], [s0].[KpiConfirmationId], [s0].[KpiId], [s0].[Status], [s0].[ValueId], [s0].[Id0], [s0].[JsonValue], [s0].[Name], [s0].[Types]
FROM (
    SELECT TOP(1) [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod], [k0].[Id] AS [Id0], [k0].[Name] AS [Name0]
    FROM [Kpis] AS [k]
    INNER JOIN [KpiGroups] AS [k0] ON [k].[KpiGroupId] = [k0].[Id]
    WHERE [k].[Id] = @__id_0
) AS [s]
LEFT JOIN (
    SELECT [k1].[Id], [k1].[Comment], [k1].[CreatedAt], [k1].[KpiConfirmationId], [k1].[KpiId], [k1].[Status], [k1].[ValueId], [d].[Id] AS [Id0], [d].[JsonValue], [d].[Name], [d].[Types]
    FROM [KpiValues] AS [k1]
    INNER JOIN [DynamicValues] AS [d] ON [k1].[ValueId] = [d].[Id]
) AS [s0] ON [s].[Id] = [s0].[KpiId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id]
2025-08-13 12:51:42.969 +04:00 [INF] Executed endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 12:51:42.972 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/Kpi/1   Responded with [200] in 31ms
2025-08-13 12:51:42.974 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Kpi/1 - 200 349 application/json 40.3254ms
2025-08-13 12:54:47.931 +04:00 [INF] Request starting HTTP/2 POST https://localhost:57679/Kpi/AddValue - application/json 315
2025-08-13 12:54:47.952 +04:00 [INF] Executing endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 12:54:48.031 +04:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [DynamicValues] ([JsonValue], [Name], [Types])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-08-13 12:54:48.055 +04:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [KpiValues] ([Comment], [CreatedAt], [KpiConfirmationId], [KpiId], [Status], [ValueId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-08-13 12:54:48.066 +04:00 [INF] Executed endpoint 'HTTP: POST /Kpi/AddValue'
2025-08-13 12:54:48.076 +04:00 [INF] Source:[::1] Request: POST https localhost:57679/Kpi/AddValue  {
  "kpiValue": {
    "kpiId": 1,
    "dynamicValue": {
      "layers": [
        {
          "type": 7,
          "value": "['green', 'red'], [[1,2],['Baku','Istanbul']]"
        }
      ],
      "name": "test2"
    },
    "statusEnum": 1,
    "createdAt": "2025-08-13T08:00:48.642Z",
    "comment": "string"
  }
} Responded with [200] in 125ms
2025-08-13 12:54:48.083 +04:00 [INF] Request finished HTTP/2 POST https://localhost:57679/Kpi/AddValue - 200 276 application/json 152.7659ms
2025-08-13 12:54:54.092 +04:00 [INF] Request starting HTTP/2 GET https://localhost:57679/Kpi/1 - null null
2025-08-13 12:54:54.101 +04:00 [INF] Executing endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 12:54:54.221 +04:00 [INF] Executed DbCommand (36ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[CompanyId], [s].[GriIndex], [s].[KpiGroupId], [s].[Name], [s].[TimePeriod], [s].[Id0], [s].[Name0], [s0].[Id], [s0].[Comment], [s0].[CreatedAt], [s0].[KpiConfirmationId], [s0].[KpiId], [s0].[Status], [s0].[ValueId], [s0].[Id0], [s0].[JsonValue], [s0].[Name], [s0].[Types]
FROM (
    SELECT TOP(1) [k].[Id], [k].[CompanyId], [k].[GriIndex], [k].[KpiGroupId], [k].[Name], [k].[TimePeriod], [k0].[Id] AS [Id0], [k0].[Name] AS [Name0]
    FROM [Kpis] AS [k]
    INNER JOIN [KpiGroups] AS [k0] ON [k].[KpiGroupId] = [k0].[Id]
    WHERE [k].[Id] = @__id_0
) AS [s]
LEFT JOIN (
    SELECT [k1].[Id], [k1].[Comment], [k1].[CreatedAt], [k1].[KpiConfirmationId], [k1].[KpiId], [k1].[Status], [k1].[ValueId], [d].[Id] AS [Id0], [d].[JsonValue], [d].[Name], [d].[Types]
    FROM [KpiValues] AS [k1]
    INNER JOIN [DynamicValues] AS [d] ON [k1].[ValueId] = [d].[Id]
) AS [s0] ON [s].[Id] = [s0].[KpiId]
ORDER BY [s].[Id], [s].[Id0], [s0].[Id]
2025-08-13 12:54:54.257 +04:00 [INF] Executed endpoint 'HTTP: GET /Kpi/{Id}'
2025-08-13 12:54:54.265 +04:00 [INF] Source:[::1] Request: GET https localhost:57679/Kpi/1   Responded with [200] in 164ms
2025-08-13 12:54:54.272 +04:00 [INF] Request finished HTTP/2 GET https://localhost:57679/Kpi/1 - 200 405 application/json 180.1887ms
